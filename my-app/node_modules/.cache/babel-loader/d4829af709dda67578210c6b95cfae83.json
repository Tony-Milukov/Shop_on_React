{"ast":null,"code":"import { ADD_TO_CART, CLEAR_CART, CHANGE_QUANITY } from \"./actions\";\nconst initialState = {\n  cartProducts: []\n}; // {\n//     ID: \"1\",\n//     name: \"chain\",\n//     price: 200,\n//     gender: \"man\",\n//     type: \"accessories\",\n// }\n\nexport const cartReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  const changeCount = () => {\n    if (action.payload.quantity == 0) {\n      state.cartProducts.forEach((item, i, arr) => {\n        return item.ID === action.payload.ID ? state.cartProducts.splice(i, 1) : state;\n      });\n    } else if (action.payload.quantity >= 1) {\n      state.cartProducts.forEach((item, i, arr) => {\n        return item.ID === action.payload.ID ? state.cartProducts[i] = {\n          ID: `${state.cartProducts[i].ID}`,\n          name: `${state.cartProducts[i].name}`,\n          gender: `${state.cartProducts[i].gender}`,\n          type: `${state.cartProducts[i].type}`,\n          price: `${state.cartProducts[i].price}`,\n          count: parseInt(action.payload.quantity),\n          image: `${state.cartProducts[i].image}`,\n          size: `${state.cartProducts[i].size}`,\n          color: `${state.cartProducts[i].color}`\n        } : state;\n      });\n    }\n  };\n\n  const getCartsProducts = () => {\n    let filtered = state.cartProducts.filter(i => i.ID === action.payload.ID);\n\n    if (filtered.length == 0) {\n      return { ...state,\n        cartProducts: [...state.cartProducts, {\n          ID: `${action.payload.ID}`,\n          name: `${action.payload.name}`,\n          gender: `${action.payload.gender}`,\n          type: `${action.payload.type}`,\n          price: `${action.payload.price}`,\n          count: 1,\n          image: `${action.payload.image}`,\n          size: `${action.payload.size}`,\n          color: `${action.payload.color}`\n        }]\n      };\n    }\n\n    if (filtered.length == 1) {\n      const addToCart = () => {\n        state.cartProducts.forEach((item, i, arr) => {\n          return item.ID === action.payload.ID ? state.cartProducts[i] = {\n            ID: `${action.payload.ID}`,\n            name: `${action.payload.name}`,\n            gender: `${action.payload.gender}`,\n            type: `${action.payload.type}`,\n            price: `${action.payload.price}`,\n            count: state.cartProducts[i].count + 1,\n            image: `${action.payload.image}`,\n            size: `${action.payload.size}`,\n            color: `${action.payload.color}`\n          } : state;\n        });\n      };\n\n      addToCart();\n      return { ...state,\n        cartProducts: [...state.cartProducts]\n      };\n    }\n  };\n\n  switch (action.type) {\n    case ADD_TO_CART:\n      return getCartsProducts();\n\n    case CLEAR_CART:\n      return {\n        cartProducts: []\n      };\n\n    case CHANGE_QUANITY:\n      changeCount();\n      return { ...state,\n        cartProducts: [...state.cartProducts]\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"names":["ADD_TO_CART","CLEAR_CART","CHANGE_QUANITY","initialState","cartProducts","cartReducer","state","action","changeCount","payload","quantity","forEach","item","i","arr","ID","splice","name","gender","type","price","count","parseInt","image","size","color","getCartsProducts","filtered","filter","length","addToCart"],"sources":["C:/Users/Tony/Documents/GitHub/Shop_on_React/my-app/src/store/cart/reducer.js"],"sourcesContent":["import {ADD_TO_CART,CLEAR_CART,CHANGE_QUANITY} from \"./actions\"\r\n\r\n\r\nconst initialState = {\r\n    cartProducts : []\r\n}\r\n// {\r\n//     ID: \"1\",\r\n//     name: \"chain\",\r\n//     price: 200,\r\n//     gender: \"man\",\r\n//     type: \"accessories\",\r\n// }\r\n\r\nexport const cartReducer = (state = initialState, action) => {\r\n    const changeCount = () => {\r\n        if(action.payload.quantity == 0) {\r\n            state.cartProducts.forEach((item,i,arr) => {\r\n                return ((item.ID === action.payload.ID) ?\r\n                    state.cartProducts.splice(i,1)  : state)\r\n            })\r\n        }\r\n        else if(action.payload.quantity >= 1) {\r\n            state.cartProducts.forEach((item,i,arr) => {\r\n                return ((item.ID === action.payload.ID) ?\r\n                    state.cartProducts[i] =  {\r\n                        ID: `${state.cartProducts[i].ID}`,\r\n                        name: `${state.cartProducts[i].name}`,\r\n                        gender: `${state.cartProducts[i].gender}`,\r\n                        type: `${state.cartProducts[i].type}`,\r\n                        price: `${state.cartProducts[i].price}`,\r\n                        count:  parseInt(action.payload.quantity),\r\n                        image: `${state.cartProducts[i].image}`,\r\n                        size: `${state.cartProducts[i].size}`,\r\n                        color: `${state.cartProducts[i].color}`\r\n\r\n                    }  : state)\r\n            })\r\n        }\r\n\r\n    }\r\n    const getCartsProducts = () => {\r\n        let filtered = state.cartProducts.filter(i => i.ID === action.payload.ID)\r\n\r\n        if(filtered.length == 0 ) {\r\n            return {\r\n                ...state,\r\n                cartProducts:  [\r\n                    ...state.cartProducts,\r\n                    {\r\n                        ID: `${action.payload.ID}`,\r\n                        name: `${action.payload.name}`,\r\n                        gender: `${action.payload.gender}`,\r\n                        type: `${action.payload.type}`,\r\n                        price: `${action.payload.price}`,\r\n                        count:  1,\r\n                        image: `${action.payload.image}`,\r\n                        size: `${action.payload.size}`,\r\n                        color: `${action.payload.color}`\r\n                    }\r\n                ]\r\n            }\r\n        }\r\n         if(filtered.length == 1) {\r\n           const addToCart = () => {\r\n                state.cartProducts.forEach((item,i,arr) => {\r\n                  return  ((item.ID === action.payload.ID) ?\r\n                         state.cartProducts[i] =  {\r\n                         ID: `${action.payload.ID}`,\r\n                         name: `${action.payload.name}`,\r\n                         gender: `${action.payload.gender}`,\r\n                         type: `${action.payload.type}`,\r\n                         price: `${action.payload.price}`,\r\n                         count:  state.cartProducts[i].count +1,\r\n                         image: `${action.payload.image}`,\r\n                             size: `${action.payload.size}`,\r\n                             color: `${action.payload.color}`\r\n\r\n                         }  : state)\r\n                })\r\n            }\r\n           addToCart()\r\n            return {\r\n                ...state,\r\n                cartProducts:  [\r\n                    ...state.cartProducts,\r\n                ]\r\n            }\r\n        }\r\n    }\r\n    switch (action.type) {\r\n        case ADD_TO_CART:\r\n            return getCartsProducts()\r\n        case CLEAR_CART:\r\n            return {\r\n                cartProducts: []\r\n            }\r\n        case CHANGE_QUANITY:\r\n            changeCount()\r\n            return  {\r\n            ...state,\r\n            cartProducts:  [\r\n                ...state.cartProducts,\r\n            ]\r\n\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}